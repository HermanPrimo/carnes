<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Carnes Asadas - Cooperación</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
      padding: 30px;
    }
    h1, h2 {
      color: #9b2347;
    }
    .evento-info, .equipo {
      background: #fff;
      border-left: 5px solid #9b2347;
      padding: 20px;
      margin-bottom: 25px;
      border-radius: 8px;
    }
    .persona {
      padding: 10px 0;
      border-bottom: 1px solid #eee;
    }
    .pagado {
      color: green;
      font-weight: bold;
    }
    .debe {
      color: red;
      font-weight: bold;
    }
    .resumen {
      font-size: 1.2em;
    }
  </style>
</head>
<body>

  <h1 class="mb-4">Carnes Asadas</h1>

  <div class="evento-info">
    <div class="mb-4">
      <label class="fw-bold mb-2 text-dark">Ubicación: Casa de Emmanuel</label>
      <div class="card shadow-sm border-0 overflow-hidden rounded-3">
        <div class="ratio ratio-16x9">
          <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1202.907045294382!2d-92.89937588284111!3d18.01907268702717!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85edd9204f539229%3A0xeeddeb1c3b4de20c!2sPanader%C3%ADa%20DIANA!5e0!3m2!1ses!2smx!4v1748994220305!5m2!1ses!2smx"
            style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>
        <div class="card-body text-center">
          <a href="https://maps.google.com/?q=Panadería DIANA, Villahermosa" target="_blank" class="btn btn-sm btn-outline-primary">
            Ver en Google Maps
          </a>
        </div>
      </div>
    </div>

    <p><strong>Hora de llegada:</strong> De 12 a 2 PM</p>
    <p><strong>Día:</strong> 04 de junio de 2025</p>
    <p><strong>Cooperación:</strong> $300 por persona</p>
    <p class="resumen"><strong>Total Recaudado:</strong> $<span id="recaudado">0</span></p>
    <p class="resumen"><strong>Faltante:</strong> $<span id="faltante">0</span></p>

    <div class="text-center mt-4">
      <button onclick="generarFichaOxxo()" class="btn btn-danger">
        Generar ficha de pago OXXO
      </button>
    </div>

    
    <div class="mt-4">
      <label class="fw-bold text-dark mb-2">Datos bancarios para transferir la cooperación:</label>
      <div class="p-4 rounded-4" style="background: linear-gradient(135deg, #00b1d4, #0094c3); color: white; max-width: 400px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div class="fw-bold fs-4">BBVA</div>
          <div class="text-end small">Débito</div>
        </div>
        <div class="fs-5 fw-bold mb-3">4152 3138 4407 2004</div>
        <div class="d-flex justify-content-between small">
          <div>
            <div class="text-uppercase" style="opacity: 0.7;">Nombre</div>
            <div class="fw-semibold">Herman Enrique Primo Escobar</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="contenedor-personas"></div>

  <script>
    const personas = [
      { grupo: "Asesor" },
      { nombre: "Jonathan de la Cruz Álvarez", pagado: false },

      { grupo: "HackGuar" },
      { nombre: "Herman Enrique Primo Escobar", pagado: true },
      { nombre: "Luis Mario Melchor Flores", pagado: true },
      { nombre: "Isai Elias Cordova de la Cruz", pagado: true },
      { nombre: "Dariana Guervara de los Santos", pagado: false },
      { nombre: "Amira Herrera Ojeda", pagado: true },

      { grupo: "HackCotea" },
      { nombre: "Iván Cordova Álvarez", pagado: false },
      { nombre: "Cesar Arturo Martínez García", pagado: false },
      { nombre: "Ricardo González Ramos", pagado: true },
      { nombre: "Emmanuel Urbano Santos Cano", pagado: true },
      { nombre: "Valery Abril Velázquez del Rivero", pagado: false },

      { grupo: "Olmeck" },
      { nombre: "Ángel Josué Olan Martínez", pagado: true },
      { nombre: "María Jose Ordóñez Rodríguez", pagado: false },
      { nombre: "Christian Fernando de la Cruz Méndez", pagado: false },
      { nombre: "Néstor Gilberto Vázquez Vera", pagado: true },
      { nombre: "Gabriela Martínez García", pagado: true },

      { grupo: "HackBalam" },
      { nombre: "Jhovany Moisés López Gómez", pagado: true },
      { nombre: "Jesus Manuel Alcazar Perez", pagado: true },
      { nombre: "Jose Alberto Arechederra Mejía", pagado: true },
      { nombre: "Dessirey Sánchez de los Santos", pagado: false },
      { nombre: "Ricardo Ramos Rios", pagado: false },

      { grupo: "Colados" },
      { nombre: "Josué Segura Milla", pagado: true },
      { nombre: "Danylleimi García López", pagado: true },
      { nombre: "Henry Mauricio López Cadena", pagado: true },
      { nombre: "Yeritza Fernanda Ramón Potenciano", pagado: true },

      { grupo: "Vortex" },
      { nombre: "José Aminadat Morato Márquez", pagado: true },
      { nombre: "Emmanuel López Torres", pagado: true },
      { nombre: "Romina Lara Ortiz", pagado: true },
      { nombre: "Alba Maxin Cervantes González", pagado: true },
      { nombre: "Brenda Alicia Pérez Hernández", pagado: true },
      { nombre: "Pedro Isaí Jiménez Córdova", pagado: true },
    ];

    const contenedor = document.getElementById("contenedor-personas");

    function render() {
      contenedor.innerHTML = "";
      let recaudado = 0;
      const total = personas.filter(p => p.nombre).length * 300;

      let grupoActual = null;
      let divGrupo = null;

      personas.forEach(p => {
        if (p.grupo) {
          grupoActual = document.createElement("div");
          grupoActual.className = "equipo";
          const h2 = document.createElement("h2");
          h2.textContent = "Equipo " + p.grupo;
          grupoActual.appendChild(h2);
          divGrupo = document.createElement("div");
          grupoActual.appendChild(divGrupo);
          contenedor.appendChild(grupoActual);
        } else {
          const row = document.createElement("div");
          row.className = "row persona";

          const colNombre = document.createElement("div");
          colNombre.className = "col-6";
          colNombre.textContent = p.nombre;

          const colEstado = document.createElement("div");
          colEstado.className = "col-6 text-end";
          const span = document.createElement("span");
          span.className = p.pagado ? "pagado" : "debe";
          span.textContent = p.pagado ? "Pagado" : "Debe";
          colEstado.appendChild(span);

          row.appendChild(colNombre);
          row.appendChild(colEstado);
          divGrupo.appendChild(row);

          if (p.pagado) recaudado += 300;
        }
      });

      document.getElementById("recaudado").textContent = recaudado;
      document.getElementById("faltante").textContent = total - recaudado;
    }

    render();
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    function generarReferenciaCliente() {
      return Math.floor(100000 + Math.random() * 900000);
    }
  
    function generarCodigoBarras() {
      let code = "";
      for (let i = 0; i < 20; i++) {
        code += Math.floor(Math.random() * 10);
        if ((i + 1) % 4 === 0 && i !== 19) code += " ";
      }
      return code;
    }
  
    function generarFechaVencimiento() {
      const hoy = new Date();
      hoy.setDate(hoy.getDate() + 3);
      return hoy.toLocaleDateString("es-MX");
    }
  
    function generarFichaOxxo() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
  
      const referenciaCliente = generarReferenciaCliente();
      const codigoBarras = generarCodigoBarras();
      const fechaVencimiento = generarFechaVencimiento();
      const monto = "$300.00 MXN";
  
      doc.setFont("helvetica", "bold");
      doc.setFontSize(16);
      doc.text(`Pagar ${monto} por su compra con referencia ${referenciaCliente}.`, 20, 20);
  
      let x = 20;
      const y = 30;
      for (let i = 0; i < 100; i++) {
        const altura = 20;
        const ancho = Math.random() > 0.7 ? 1.2 : 0.8;
        if (Math.random() > 0.5) {
          doc.setFillColor(0);
          doc.rect(x, y, ancho, altura, "F");
        }
        x += ancho + 0.3;
      }
  
      doc.setFont("courier", "bold");
      doc.setFontSize(12);
      doc.text(codigoBarras, 20, 55);
  
      doc.setFont("helvetica", "normal");
      doc.setFontSize(12);
      doc.text(`Referencia cliente: ${referenciaCliente}`, 20, 70);
      doc.text("Ubicación: En OXXO", 20, 78);
      doc.text(`Vencimiento: ${fechaVencimiento}`, 20, 86);
      doc.text(`Monto a pagar: ${monto}`, 20, 94);
  
      doc.setFont("helvetica", "bold");
      doc.setFontSize(12);
      doc.text("$ Puede pagar en OXXO de las siguientes formas:", 20, 110);
  
      doc.setFont("helvetica", "normal");
      doc.setFontSize(10);
      const instrucciones = [
        "1. Diríjase a una tienda OXXO y dicte este número al cajero.",
        "2. Enseñe el código de barras desde tu celular para que lo escanee.",
        "3. También puedes imprimir esta ficha y llevarla contigo.",
      ];
      let yInst = 118;
      instrucciones.forEach(inst => {
        doc.text(inst, 22, yInst);
        yInst += 8;
      });
  
      const pdfBlob = doc.output("blob");
      const pdfURL = URL.createObjectURL(pdfBlob);
      window.open(pdfURL, "_blank"); 
      doc.save("ficha_pago_oxxo.pdf"); 
  
    }
  </script>


</body>
</html>
